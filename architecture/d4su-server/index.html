
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../introduction/references/">
      
      
        <link rel="next" href="../references/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>d4SU platform - d4SU</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#d4su-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="d4SU" class="md-header__button md-logo" aria-label="d4SU" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            d4SU
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              d4SU platform
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../introduction/needs-and-case-for-action/" class="md-tabs__link">
          
  
  Introduction

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../data-model/introduction/" class="md-tabs__link">
          
  
  Concepts & Data Model

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../features/introduction/" class="md-tabs__link">
          
  
  Features

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ifc5/introduction/" class="md-tabs__link">
          
  
  IFC5

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/dev/" class="md-tabs__link">
          
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contact/" class="md-tabs__link">
        
  
    
  
  Contact

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/lvanlier/d4su-server" class="md-tabs__link">
        
  
    
  
  GitHub

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="d4SU" class="md-nav__button md-logo" aria-label="d4SU" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    d4SU
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/needs-and-case-for-action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Needs and Case for Action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/future-and-d4su/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The future and the d4SU platform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    d4SU platform
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    d4SU platform
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c4-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      C4 diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rationale-for-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Rationale for tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Simple flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flow-with-long-running-background-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Flow with long running background tasks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-view" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment view
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-database-storage-for-technical-data-related-to-spatial-units" class="md-nav__link">
    <span class="md-ellipsis">
      Other database storage for technical data related to Spatial Units
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other database storage for technical data related to Spatial Units">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ifc2sql-in-ifcopenshell-ifcpatch-recipes" class="md-nav__link">
    <span class="md-ellipsis">
      ifc2sql - in IfcOpenShell / IfcPatch / Recipes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ifcsql" class="md-nav__link">
    <span class="md-ellipsis">
      IfcSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bimserver" class="md-nav__link">
    <span class="md-ellipsis">
      BIMserver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ifc-graph" class="md-nav__link">
    <span class="md-ellipsis">
      IFC-Graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speckle" class="md-nav__link">
    <span class="md-ellipsis">
      Speckle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts & Data Model
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Concepts & Data Model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/spatial-units/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spatial Units, Building Logbook and Technical Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/ifc-entities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ifc entities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/spaces-zones-and-spatialzones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spaces, Zones and SpatialZones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/materials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Materials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/classifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classifications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/representations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Representations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/properties/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Properties and Quantities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/ifc-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IFC Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/ids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Information Delivery Specification (IDS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/data-bundle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data bundle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/physical-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Physical Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/notes-on-ifc5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notes on IFC5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-model/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/validate-an-ifc-model-with-ids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate an IFC model with IDS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/convert-ifc-to-ifcjson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convert an IFC to IfcJSON
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/filter-the-ifcjson-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filter the ifcJSON model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/store-in-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Store the ifcJSON in the database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/import-and-process-ifc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import and process an IFC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/read-model-from-db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read the ifcJSON from the Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/transform-to-ifc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transform the ifcJSON to IFC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/extract-spatial-unit-storey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract a Storey from the Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/export-spaces-from-a-bundle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export Spaces from a Bundle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/create-spatial-unit-spatialZone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create SpatialZones - Apartment or Common Parts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/extract-spatial-unit-spatialZone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract a SpatialZone - Apartment or Common Parts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/extract-the-envelope/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract the Envelope
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/export-properties-of-a-spatialZone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export properties of a SpatialZone
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/crud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CRUD REST APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_17" >
        
          
          <label class="md-nav__link" for="__nav_5_17" id="__nav_5_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hosted IFC Patch features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_17">
            <span class="md-nav__icon md-icon"></span>
            Hosted IFC Patch features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/migrate-ifc-schema-to-ifc4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrate an IFC model from IFC2X3 to IFC4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/tessellate-ifc-elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tessellate IFC elements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/extract-ifc-elements-with-ifcpatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract Elements from the IFC model with IfcPatch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/extract-ifc-storeys-with-ifcpatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract Storeys from the IFC model with IfcPatch
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_18" >
        
          
          <label class="md-nav__link" for="__nav_5_18" id="__nav_5_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Other
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_18">
            <span class="md-nav__icon md-icon"></span>
            Other
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/convert-ifc-to-other-formats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convert to IFC to other formats with IfcOpenShell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/conversion-from-cityjson-to-ifc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversion from CityJson to IFC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/create-floor-plans/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create floor plans
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/import-non-ifc-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import non IFC model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/generate-the-ifc-model-with-IfcOpenShell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate the IFC model with IfcOpenShell
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    IFC5
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            IFC5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ifc5/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ifc5/hello-wall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Hello Wall example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ifc5/spatial-units/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spatial Units
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ifc5/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/lvanlier/d4su-server" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c4-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      C4 diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rationale-for-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Rationale for tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Simple flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flow-with-long-running-background-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Flow with long running background tasks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-view" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment view
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-database-storage-for-technical-data-related-to-spatial-units" class="md-nav__link">
    <span class="md-ellipsis">
      Other database storage for technical data related to Spatial Units
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other database storage for technical data related to Spatial Units">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ifc2sql-in-ifcopenshell-ifcpatch-recipes" class="md-nav__link">
    <span class="md-ellipsis">
      ifc2sql - in IfcOpenShell / IfcPatch / Recipes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ifcsql" class="md-nav__link">
    <span class="md-ellipsis">
      IfcSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bimserver" class="md-nav__link">
    <span class="md-ellipsis">
      BIMserver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ifc-graph" class="md-nav__link">
    <span class="md-ellipsis">
      IFC-Graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speckle" class="md-nav__link">
    <span class="md-ellipsis">
      Speckle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="d4su-server">d4SU Server</h1>
<h2 id="overview">Overview</h2>
<p>The <strong>d4SU Server platform</strong> is focused on the management of the Building and Infrastructure Data in the context of Spatial Units subjected to Public Sector regulations. Currently the focus is on the Building data and services relevant to Infrastructure data are not available at this moment.</p>
<p>By 'focused on data', it is also meant 'not providing' other functionalities such as the integration in a broader landscape. This is the responsibility of an <strong>Integration Platform</strong> that is not is scope of the d4SU Server Platform.</p>
<p><a class="glightbox" href="../../assets/schemas/d4su-5.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="d4SU Achitecture Overview Diagram" src="../../assets/schemas/d4su-5.svg" /></a></p>
<p>The d4SU Platform has 4 main technology components</p>
<ul>
<li><strong>FastAPI</strong> <a href="../references/#fastapi">A modern, fast (high-performance), web framework for building APIs with Python</a>.</li>
<li><strong>Celery</strong> <a href="../references/#celery">A Distributed Task Queue in Python</a></li>
<li><strong>Redis</strong> <a href="../references/#redis">An In-Memory Database used for Celery as Message Queue and Result Store</a></li>
<li><strong>PostgreSQL</strong> <a href="../references/#postgresql">A powerful, open source object-relational database</a> with support for a <strong>large variety of column types (including json, jsonb, geometry)</strong> and <strong>Partitioning options</strong> for very large DB size. It has support for <strong>Geomtry</strong> with <a href="../references/#postgis">PostGIS</a> and support for <strong>Graph</strong> with <a href="../references/#apache-age">Apache AGE</a>.</li>
</ul>
<p>The d4SU Platform also leverage:</p>
<ul>
<li><strong>SQLModel</strong> <a href="../references/#sqlmodel">SQLModel is based on Python type annotations, and powered by Pydantic and SQLAlchemy</a></li>
<li><strong>PyArrow</strong> <a href="../references/#apache-arrow-pyarrow">Apache Arrow - Filesystem Interface</a>  provides input and output streams as well as directory operations for the Local File System, Amazon S3, Google Cloud Storage (GCS), HDFS and others.</li>
<li><strong>Other Apache Arrow</strong> tools (e.g., <strong>ADBC Driver for PostgreSQL</strong>, or support for Machine Learning Workflows) might be super relevant but that's not yet investigated.</li>
<li><strong>IfcOpenShell</strong> <a href="../references/#ifcopenshell">A suite of IFC tools in C++ and Python</a> <strong>the base layer of the d4SU Server and the rational for it to be in Python</strong></li>
<li><strong>IfcSON</strong> <a href="../references/#ifcjson">Python Tool (on top of ifcOpenShell) to convert an IFC to a JSON (IFC2JSON) and a JSON to an IFC (JSON2IFC)</a>. IfcJSON has been built in the context of a larger project presented in <a href="../references/#ifcjson">IFC.JSON</a></li>
<li><strong>IFC5-development tools</strong> <a href="../references/#buildingsmart-ifc5">buildingSmart developement tools</a></li>
</ul>
<h2 id="c4-diagram">C4 diagram</h2>
<p><em>The diagram hereunder is built with Mermaid.js integrated with Material for MkDocs. At the present time, it is not quite legible in dark mode and a swicth to standard mode (top menu bar) is recommended</em></p>
<pre class="mermaid"><code>
C4Container
    System_Ext(Integration, "Integration server", "A system that sends processing Request to the &lt;br /&gt;Backend server and gets responses on behalf of a client system")

    System_Boundary(b1, "Backend Server") {
        System_Boundary(b2, "Server") {
            System(FastAPI, "FastAPI", "Processes requests&lt;br /&gt; Delegates heavy tasks to Celery")

            Component(Tools, "Tools", "IfcOpenShell&lt;br /&gt;IfcJSON")

            Component(Logging, "Logging","")

            System(Celery, "Celery Worker", "Processes heavy tasks")
        } 
        System_Boundary(b3, "Broker") {
            SystemQueue(Broker, "Broker and &lt;br /&gt;Result Store (Redis)", "Act as a Message Broker and  &lt;br /&gt;a Result Store between FastAPI and Celery")
        }    
        System_Boundary(b4, "Database", "Database") {
            SystemDb(Database, "Postgres Database", "Stores the D4SU data") 
        }
        System_Boundary(b5, "File Storage", "") {
            SystemDb(FileStorage, "File Storage (Apache Arrow FS)", "Provides file storage services for IFC and IfcJSON files")   
        }

    }
    BiRel(Integration, FastAPI , "Request / Response or Notification")
    BiRel(FastAPI, Broker, "Queue Task (Chain), Read Result")
    Rel(Celery, Broker, "Fetch from Queue and Write Result")
    Rel(FastAPI, Tools, "uses")
    Rel(Celery, Tools, "uses")
    Rel(FastAPI, Database, "CRUD Data")
    Rel(Celery, Database, "CRUD Data") 
    Rel(Celery, FileStorage, "Read/Write")

    UpdateElementStyle(Integration, $fontColor="white", $bgColor="black", $borderColor="white")

    UpdateRelStyle(FastAPI, Integration, $offsetX="20", $offsetY="20")
    UpdateRelStyle(FastAPI, Celery, $textColor="blue", $lineColor="blue", $offsetX="5")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="2")
</code></pre>
<h2 id="rationale-for-tools">Rationale for tools</h2>
<p>The d4SU platform is at the early stage of exploration, concept validation and specification. Speed and ease of implementation is key.</p>
<ul>
<li><strong>Why Python</strong>? Python is very easy to comprehend and has a huge ecosystem. Additionally, <strong>IfcOpenShell</strong> has a python version and it makes IFC much more accessible. With <strong>Jupyter</strong>, everthing can be tried before moving the code to a server plaform. And <strong>pandas</strong> are always welcome to make things simpler.</li>
<li><strong>Why FastAPI</strong>? Incredibly simple and efficient.</li>
<li><strong>Why Celery</strong>? Can't do without something to manage heavy tasks and avoid blocking the requester. Celery is a perfect fit, powerful and easy to use.</li>
<li><strong>Why Redis</strong>? Again, powerful, and easy to use. With Celery, there are multiple options for the Broker and Result Store. Redis caters for the two.</li>
<li><strong>Why PostgreSQL</strong>? It's mainly why another db? It has all that is needed. It has also Support for Geometry and Graph, via extensions. For extremely large DB, an offloading to HBase with <a href="../references/#phoenix">Phoenix</a> could be considered, but that is not needed at this stage.</li>
<li><strong>Why SQLModel</strong> (on top of <strong>SQLAlchemy</strong>) to access PostgreSQL? Again ease of use.</li>
</ul>
<p>When working with IFC, there is always a need for a Viewer. </p>
<p>For IFC &lt; 5, I am using:</p>
<ul>
<li><a href="../references/#openifcviewer">OpenIFCViewer</a></li>
<li><a href="../references/#that-open">ThatOpen (Web)</a></li>
<li><a href="../references/#bimcollab-zoom">BIMCollab ZOOM</a></li>
<li><a href="../references/#solibri-anywhere">Solibri Anywhere</a></li>
<li><a href="../references/#blender-with-bonsai">Blender with Bonsai</a>; see also the <a href="../references/#blender-with-bonsai">video on Youtube</a></li>
</ul>
<p>For IFC 5, I am using:</p>
<ul>
<li><a href="../references/#acca-usbim.ifc5">ACCA usBIM.ifc5</a>; enables to convert IFC&lt;5 files to IFC5 (.ifcx) and to vizualize the model.</li>
<li><a href="../references/#buildingsmart-ifc5">buildingSmart IFC5-development</a>; provides ifc5 schemas, ifc5 visualization tool and more</li>
</ul>
<p><strong>Why several viewers?</strong>: with the difference in versions of the IFC files (2x3, 4.0, ...) and and possible tools rendering issues, I found it a necessity to control results with several viewers. They each have distinctive capabilities.</p>
<p>For coding, I use <strong>Visual Studio Code</strong> and <strong>GitHub Copilot</strong>. GenAI for coding is a marvel. It does not always provide the solution to the problem but it wonderfully seeds the process that leads to the solution.</p>
<p>For the documentation, I use <a href="../references/#material-for-mkdocs">Material for MkDocs</a>. It's a breeze!</p>
<h2 id="simple-flow">Simple flow</h2>
<pre class="mermaid"><code>sequenceDiagram
    autonumber
    Integration -&gt;&gt; FastAPI: RESTful request
    FastAPI -&gt;&gt; PostgreSQL: CRUD 
    FastAPI --&gt;&gt; Integration: response
</code></pre>
<p>Within FastAPI, the the design is layered in a standard way, with all layers sharing the same models</p>
<pre class="mermaid"><code>%%{init: {"flowchart": {"htmlLabels": true}} }%%
flowchart
    direction RL
    subgraph fastapi ["FastAPI"]
        direction TB
        web
        service
        data
        model
        web --&gt; service
        service --&gt; data
        data --&gt; service
        service --&gt; web
    end
    subgraph storage
        direction TB
        database
        filestorage
    end
    fastapi --&gt; storage
</code></pre>
<h2 id="flow-with-long-running-background-tasks">Flow with long running background tasks</h2>
<p>For relatively 'long running' tasks, the caller will not hang waiting for the completion. The latter will be notified asynchronously.  </p>
<p><em>Mermaid.js layout is sometimes a mystery!</em></p>
<pre class="mermaid"><code>%%{init: {"flowchart": {"htmlLabels": true}} }%%
flowchart
    direction TB
    integration
    subgraph d4su-server ["d4su Platform"]
        direction TB
        subgraph front-server
            direction TB
            fastapi[FastAPI] 
        end
        subgraph task-server
            celery["Celery Worker(s) for background tasks"]
        end
        subgraph broker ["Broker and Result Store"]
            direction TB
            redis[Redis]
        end
        subgraph Storage
            direction TB
            db[PostgreSQL]
            fs["File Storage&lt;br /&gt;with Apache Arrow FS (local fs, S3, ...)"]
        end
    end   
    integration -- "*1.* request" --&gt; fastapi
    fastapi -- "*2.* rsponse with follow-up id" --&gt; integration
    fastapi -- "*3.* instructions" --&gt; redis
    celery -- "*4.* get instructions" --&gt; redis
    celery -- "*5.* get and write files" --&gt; fs
    celery -- "*6.* CRUD Model" --&gt; db
    celery -- "*7.* write task results" --&gt; redis
    celery -- "*8.* notify result" --&gt; fastapi
    fastapi -- "*9.* notify result for follow-up id" --&gt; integration
</code></pre>
<pre class="mermaid"><code>sequenceDiagram
    autonumber
    Integration -&gt;&gt; FastAPI: request
    FastAPI --&gt;&gt; Integration: response with follow-up id
    FastAPI -&gt;&gt; Redis: intructions
    Celery Worker -&gt;&gt; Redis: get instructions
    Celery Worker -&gt;&gt; File Storage: get and write files
    Celery Worker -&gt;&gt; PostgreSQL : CRUD Model
    Celery Worker -&gt;&gt; Redis: write task results
    Celery Worker --&gt;&gt; FastAPI: notify task completion
    FastAPI --&gt;&gt; Integration: notify result for follow-up id </code></pre>
<p>This illustrative flow is as follows:</p>
<ol>
<li>A request is made by the Integration platform and received by the <strong>web layer</strong> in FastAPI. The request can come as a RESTfull request or as a WebSocket message.</li>
<li>A response is provided by FastAPI with an Id for the follow-up</li>
<li>The request is serviced by the <strong>sevice layer</strong> in FastAPI. There, the request is associated with a single task, or with a group of tasks that can be executed in parallel or as a chain of tasks that must be performed in sequence. The execution is trigered by sending a message to the broker (Redis).</li>
<li>Celery has started a number of <strong>worker</strong> (by default 2 workers per core). A Celery Worker takes the task from the broker and execute the task</li>
<li>The task execution may e.g., gets an IFC file, transforms the file, filters the content</li>
<li>The task execution may eg., stores the filtered content in Postgres, ... One big task can be splitted in independent tasks that can be executed in parallel or in sequence in a chain.</li>
<li>Each task writes its result (such as status and parameters to be transfered to the next tasks) in the <strong>Result Store</strong>, which here is also Redis.</li>
<li>At the end, the task completion (one task, the group or the chain) is notified back to FastAPI. This can be done by a POST back to FastAPI. Alternatively, FastAPI could poll the broker every second to get the status of the task.</li>
<li>FastAPI notifies the Integration Platform of the result of the request. Can be done va WebSockets or via a 'callback' POST.</li>
</ol>
<h2 id="deployment-view">Deployment view</h2>
<pre class="mermaid"><code>architecture-beta
    group d4su(cloud)[d4SU]
    service server1(server)[FastAPI] in d4su
    service server2(server)[Redis] in d4su
    service server3(server)[Celery] in d4su
    service db(database)[PosgreSQL] in d4su
    service disk(disk)[FileStore] in d4su
    server2:L -- R:server1
    server3:T -- B:server2
    db:R -- L:server3
    db:T -- B:server1
    disk:L -- R:server3</code></pre>
<h2 id="other-database-storage-for-technical-data-related-to-spatial-units">Other database storage for technical data related to Spatial Units</h2>
<p>The proposed platform relies on Postgresql for the storage of data with a specific data model that will be outlined in the Data Model section. The data model is designed to accomodate IFC data but also other formats.</p>
<p>There are alternative solutions or approaches for storing data that can - at a point in time - complement the proposed approach. The solutions hereunder have IFC as main or exclusive focus with the exception of <strong>Speckle</strong> that provides a complete integration platform for the AEC industry. </p>
<h3 id="ifc2sql-in-ifcopenshell-ifcpatch-recipes">ifc2sql - in IfcOpenShell / IfcPatch / Recipes</h3>
<p><a href="../references/#ifc2sql">ifc2sql</a> converts an IFC-SPF model to <strong>SQLite</strong> or <strong>MySQL</strong>. It is part of IfcOpenShell IfcPatch as a 'recipe'. The <a href="../references/#ifc2sql">code</a> is available on github. ifc2sql creates a table for each ifc entity.</p>
<p>Development language: Python</p>
<h3 id="ifcsql">IfcSQL</h3>
<p><a href="../references/#ifcsql">ifcSQL</a> is a database-schema for storing IFC-based models including the IFC data model schema of buildingSMART International. ifcSQL requires Microsoft <strong>SQLServer</strong>. It creates one table for Entities and a distinct table for each basetype of attributes.</p>
<p>Development language: C#</p>
<h3 id="bimserver">BIMserver</h3>
<p><a href="../references/#bimserver">BIMServer</a> enables to store and manage the information of a construction (or other building related) project. Data is stored in the open data standard IFC. The BIMserver is not a fileserver, but it uses a model-driven architecture approach. This means that IFC data is stored as objects. You could see BIMserver as an IFC database, with special extra features like model checking, versioning, project structures, merging, etc. It use <strong>Berkeley DB</strong> which is an effective KeyValue store.</p>
<p>Development language: Java</p>
<h3 id="ifc-graph">IFC-Graph</h3>
<p><a href="../references/#ifc-graph">IFC-Graph</a> is based on work described in the paper <a href="../references/#ifc-graph">IFC-graph for facilitating building information access and query</a> and enables to convert and IFC Model to a Labeled Property Graph (LPG) stored in the Graph Database <strong>Neo4j</strong>. It builds the graph with nodes for both entities and relationships (referred to repectively as 'full entities' and 'bridging entities'). Expectedly, processing time increases dramatically with the number of nodes.</p>
<p>Development language: Python</p>
<h3 id="speckle">Speckle</h3>
<p><a href="../references/#speckle">Speckle Server</a> positions itself as <strong>the data infrastructure for the AEC industry</strong>. Speckle is an open-source platform designed for the architecture, engineering, and construction (AEC) industries. It facilitates the exchange of data between various software applications and stakeholders involved in building design and construction projects. Speckle uses <strong>PostgreSQL</strong> as its primary database for storing and managing data.
Speckle provides a python sdk <a href="../references/#speckle">Speckle | specklepy</a></p>
<p>Development languages : C#, Typescript, Python</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "search.share", "content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.sections", "navigation.expand"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>